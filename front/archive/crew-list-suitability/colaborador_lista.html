<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Colaboradores</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: #fff;
    color: #111827;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
  }
  header button {
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    cursor: pointer;
  }
  #btn-back { background: #ffffff; color: #000000; border: 1px solid #d1d5db; }
  #btn-menu { background: #000000; color: #ffffff; }

  main { flex: 1; display: flex; flex-direction: column; padding: 16px; overflow: hidden; }
  h1 { font-size: 18px; font-weight: 600; margin: 8px 0 0 0; }
  h2 { font-size: 14px; font-weight: 400; color: #6b7280; margin: 4px 0 16px 0; }

  .card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    width: 100%;
    max-width: 500px;
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .card .number { font-size: 36px; font-weight: 700; line-height: 1; }
  .card .percentage { font-size: 16px; color: #6b7280; margin-top: 4px; }
  .card .label { font-size: 14px; margin-bottom: 8px; font-weight: 500; }

  .table-container { flex: 1; overflow: auto; border: 1px solid #e5e7eb; border-radius: 12px; }
  table { border-collapse: collapse; width: 100%; }
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #e5e7eb;
    font-size: 14px;
    white-space: nowrap;
  }
  th {
    font-weight: 600;
    color: #374151;
    background: #f9f9f9;
    position: sticky;
    top: 0;
    z-index: 1;
  }
  .circle {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #e5e7eb;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    margin-right: 8px;
    color: #111827;
  }
  .name-cell { display: flex; align-items: center; cursor: pointer; }
  .suitability-box {
    border: 1px solid #d1d5db;
    border-radius: 8px;
    padding: 4px 8px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
  }
  #total { font-weight: bolder; }
  #tfootFinal { background-color: #F7F9FB; }

  .modal-bg {
    position: fixed;
    left: 0; right: 0; top: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: flex-end;
    align-items: flex-end;
    z-index: 10;
  }
  .modal {
    background: #fff;
    width: 428px;
    padding: 28px 32px 40px 32px;
    display: flex;
    flex-direction: column;
    border-radius: 24px 24px 0 0;
    max-height: 90vh;
    overflow-y: auto;
    z-index: 11;
  }
  .modal-header { display: flex; flex-direction: column; align-items: center; margin-bottom: 16px; }
  .modal-header .circle { width: 60px; height: 60px; font-size: 20px; margin-bottom: 12px; }
  .modal-header h1 { font-size: 20px; font-weight: 600; margin: 0; }
  .modal-header h2 { font-size: 14px; font-weight: 400; color: #6b7280; margin: 4px 0 0 0; }
  .modal-body p { font-size: 14px; margin: 4px 0; text-align: left; }
  .modal-body .line { width: 100%; border-bottom: 1px solid #e5e7eb; margin: 8px 0; }
</style>
</head>
<body>
<header>
  <button id="btn-back">&larr;</button>
  <button id="btn-menu">&#9776;</button>
</header>

<main>
  <h1 id="lista-colaboradores">Lista de colaboradores</h1>
  <h2>Acompanhar colaboradores</h2>

  <div class="card">
    <div class="label">SuitAbilities respondidos</div>
    <div class="number" id="number-respondidos">0</div>
    <div class="percentage" id="percentage-respondidos">0%</div>
  </div>

  <div class="table-container">
    <table id="colaboradores-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>SuitAbility</th>
          <th>Ticket</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot id="tfootFinal">
        <tr>
          <td><strong>Total</strong></td>
          <td></td>
          <td id="total"></td>
        </tr>
      </tfoot>
    </table>
  </div>
</main>

<!-- Modal -->
<div class="modal-bg" id="modal-bg">
  <div class="modal">
    <div class="modal-header">
      <div class="circle" id="modal-initials">AB</div>
      <h1 id="modal-name">Nome Sobrenome</h1>
      <h2 id="modal-description">Colaborador</h2>
    </div>
    <div class="modal-body" id="modal-body"></div>
  </div>
</div>

<script>
  const tableBody = document.querySelector("#colaboradores-table tbody");
  const totalEl = document.getElementById("total");
  const numberEl = document.getElementById("number-respondidos");
  const percentageEl = document.getElementById("percentage-respondidos");
  const modalBg = document.getElementById("modal-bg");
  const modalInitials = document.getElementById("modal-initials");
  const modalName = document.getElementById("modal-name");
  const modalDescription = document.getElementById("modal-description");
  const modalBody = document.getElementById("modal-body");

  let respondidos = 0;

  fetch("colaboradores.json")
    .then(res => res.json())
    .then(data => {
      const colaboradores = data.items;

      colaboradores.forEach(colab => {
        const tr = document.createElement("tr");

        // Nome + círculo
        const tdNome = document.createElement("td");
        tdNome.classList.add("name-cell");
        const circle = document.createElement("div");
        circle.classList.add("circle");
        const initials = colab.name.split(" ").map(w => w[0]).slice(0,2).join("");
        circle.textContent = initials.toUpperCase();
        tdNome.appendChild(circle);
        tdNome.append(colab.name);

        tdNome.addEventListener("click", () => {
          modalInitials.textContent = initials.toUpperCase();
          modalName.textContent = colab.name;
          modalDescription.textContent = colab.description;
          modalBody.innerHTML = "";
          colab.items.forEach(info => {
            modalBody.innerHTML += `<div class="line"></div><p>${info.title}</p><p>${info.description}</p>`;
          });
          modalBg.style.display = "flex";
        });

        // SuitAbility
        const tdSuit = document.createElement("td");
        const box = document.createElement("div");
        box.classList.add("suitability-box");
        const check = document.createElement("input");
        check.type = "checkbox";
        check.disabled = true;
        if (colab.suitability) {
          check.checked = true;
          respondidos++;
        }
        box.appendChild(check);
        tdSuit.appendChild(box);

        // Ticket (aqui não existe no JSON de exemplo, deixei vazio ou pode inventar)
        const tdTicket = document.createElement("td");
        tdTicket.textContent = colab.ticket || "-";

        tr.append(tdNome, tdSuit, tdTicket);
        tableBody.appendChild(tr);
      });

      totalEl.textContent = data.total;
      numberEl.textContent = respondidos;
      percentageEl.textContent = ((respondidos / colaboradores.length) * 100).toFixed(2) + "%";
    });

  modalBg.addEventListener("click", (e) => {
    if(e.target === modalBg) modalBg.style.display = "none";
  });
</script>
</body>
</html>
